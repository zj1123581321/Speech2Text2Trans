<!DOCTYPE html>
<html>
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S8W4SEB7QQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-S8W4SEB7QQ');
    </script>
    <meta charset="UTF-8">
    <title>音频翻译</title>
    <meta name="description" content="调用 whisper API 完成音频to文本，并自动翻译成中文">
    <link rel="icon" type="image/x-icon" href="favico.jpg">
    <meta property="og:title" content="音频翻译 by whisper">
    <meta property="og:description" content="调用 whisper API 完成音频to文本，并自动翻译成中文">
    <link rel="stylesheet" href="style.css">
    <meta http-equiv="Content-Security-Policy" content="cross-origin-isolated">
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.9.5/dist/ffmpeg.min.js"></script>
    <script src="coi-serviceworker.js" type="text/javascript"></script>
    <script>const { createFFmpeg, fetchFile } = FFmpeg;
    // https://www.zhihu.com/question/483663680/answer/2574668151 
      const ffmpeg = createFFmpeg({
          corePath: 'https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.8.5/dist/ffmpeg-core.js',
      
          log: true,
      
       });</script>
  </head>
  <body>
    <h1>音频翻译</h1>
    <label for="api-key-input">输入 OpenAI API key：</label>
    <input type="password" id="api-key-input" placeholder="输入您的 API key">
    <button id="save-api-key-btn">保存 API key</button>
    <br>
    <input type="file" id="file-upload" accept=".mp3,.mp4,.mpeg,.mpga,.m4a,.wav,.webm,.ogg">
    <button id="translate-btn">翻译</button>
    <h2>英文转写结果：</h2>
    <div id="transcription"></div>
    <h2>中文翻译结果：</h2>
    <div id="translation"></div>
    <hr>
    <div id="readme">
      <h2 id="speech2text2trans">Speech2Text2Trans</h2>
      <p>Call whisper api to finish transcribing audio to English, call google translate api to finish translating English to Chinese.
      用户上传音视频文件，网页会调用 Whipser Api 将其转录为英文文本，然后再调用 Google Translate API 将英文文本翻译为中文。</p>
      <h2 id="使用场景">使用场景</h2>
      <ul>
        <li>从 Whatsapp Web 下载语音文件，查看转写结果</li>
        <li>下载视频素材，查看口播文案</li>
        <li>其他需要获取 Speech2Text 的场景</li>
      </ul>
      <h2 id="怎样获取-openai-api-key">怎样获取 OpenAI API key</h2>
      <ul>
        <li>在你拥有一个 OpenAI 账号(即 Chatgpt 账号)之后，打开 
          <a href="https://platform.openai.com/account/api-keys">https://platform.openai.com/account/api-keys</a> 网址
        </li>
        <li>点击『Create new secret key』。</li>
        <li>这个 key 只会出现一次，请自行保存好。</li>
      </ul>
      <p>
        <img src="https://s1.ax1x.com/2023/03/08/ppmm881.md.png" alt="API key">
        </p>
        <h2 id="当前支持语言">当前支持语言</h2>
        <p>Afrikaans, Arabic, Armenian, Azerbaijani, Belarusian, Bosnian, Bulgarian, Catalan, Chinese, Croatian, Czech, Danish, Dutch, English, Estonian, Finnish, French, Galician, German, Greek, Hebrew, Hindi, Hungarian, Icelandic, Indonesian, Italian, Japanese, Kannada, Kazakh, Korean, Latvian, Lithuanian, Macedonian, Malay, Marathi, Maori, Nepali, Norwegian, Persian, Polish, Portuguese, Romanian, Russian, Serbian, Slovak, Slovenian, Spanish, Swahili, Swedish, Tagalog, Tamil, Thai, Turkish, Ukrainian, Urdu, Vietnamese, and Welsh.</p>
        <h2 id="文件大小与格式限制">文件大小与格式限制</h2>
        <ul>
          <li>文件上传目前限制为 25 MB，并且支持以下输入文件类型：mp3、mp4、mpeg、mpga、m4a、wav 和 webm。</li>
          <li>也支持 Whatsapp 下载出来的 .opp 文件，
            <strong>但是由于需要转码，耗时会稍久一点，请耐心等待</strong>
          </li>
        </ul>
        <h2 id="价格：每分钟-0006-">价格：每分钟 0.006 $</h2>
        <ul>
          <li>折合人民币大概每分钟 0.04 元。</li>
          <li>非常便宜，大概是 Google Cloud Speech2Text API 价格的 1/4。</li>
          <li>每个 OpenAI 账号自带的 18$ 大概可以换算成 50 小时的转写时长。</li>
        </ul>
    </div>
    <script src="script.js"></script>
  </body>
